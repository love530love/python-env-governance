# 02 · 路径结构规范：统一的磁盘分区与存储架构

> 本章节旨在解决 AI 开发中最容易被忽略的问题 —— **路径混乱**。
> 
> 正确的路径规划，是实现环境可控、迁移复现、部署还原的基础。

---

## 📌 为什么要进行路径治理？

在 AI 开发环境中，我们涉及多个系统组件：

- Anaconda 多版本环境
- WSL 子系统（如 Fedora）
- Docker / Podman 镜像与卷
- 项目代码与构建工具
- 第三方模型文件、数据集

这些组件的默认路径分散在：

- `C:\Users\<用户名>\`
- `C:\ProgramData\`
- `C:\Users\<用户名>\AppData\Local`
- `%LOCALAPPDATA%\Docker\wsl\data`
- `%USERPROFILE%\anaconda3`

**问题就来了：**

- 系统盘空间告急，拖慢整个电脑性能；
- 多系统组件彼此交叉，迁移困难；
- 文件搜索、备份混乱，难以定位项目依赖；
- 环境变量指向不清，容易造成 PATH 污染。

> 所以，我们需要制定一套“结构清晰、层次分明”的路径规范。

---

## 📁 路径治理的五大原则

1. **系统盘只保系统**
2. **环境组件分区隔离**
3. **开发代码集中统一**
4. **数据模型独立挂载**
5. **可复现结构为目标**

---

## 🧱 推荐的路径结构示意

假设我们将项目主目录放在 `I:\` 盘（可根据个人情况替换为其他非系统盘）：

```text
I:\
│
├── WSL\                     ← 所有 WSL 子系统根目录（通过 wsl.exe --import 导入）
│   └── Fedora-41\
│
├── Conda\                   ← Conda 主环境与多版本 Python 管理
│   ├── base\
│   ├── python38\
│   ├── python39\
│   └── ...
│
├── Docker\                 ← Docker Desktop 镜像与卷迁移目标目录
│   ├── data-root\
│   └── volumes\
│
├── DevProjects\            ← 个人或教学用项目主目录
│   ├── project1\
│   └── project2\
│
├── Models\                 ← AI 模型、数据集、第三方预训练包集中存放目录
│   └── llama3\
│
└── Tools\                 ← 实用工具包、脚本、构建组件
```

---

## 🛠 关键迁移实践

### 1. WSL 子系统迁移

使用导出 / 导入方式实现迁移（参考原文实践）：

```powershell
# 导出
wsl --export <发行版名称> I:\WSL\fedora.tar

# 注销旧系统
wsl --unregister <发行版名称>

# 导入新路径
wsl --import Fedora-41 I:\WSL\Fedora-41 I:\WSL\fedora.tar
```

详见：[如何将 WSL 迁移到 I 盘路径](https://aicity.blog.csdn.net/article/details/148874083)

---

### 2. Docker 镜像与卷路径迁移

采用 PowerShell 创建符号链接静默迁移（**避免直接改配置导致出错**）：

```powershell
# 停止 Docker Desktop
Stop-Process -Name "Docker Desktop" -Force

# 移动 Docker 镜像目录到新位置
Move-Item "$env:USERPROFILE\AppData\Local\Docker" "I:\Docker\data-root"

# 创建符号链接
cmd /c mklink /D "$env:USERPROFILE\AppData\Local\Docker" "I:\Docker\data-root"

# 重启 Docker Desktop 即可
```

详见：[Docker Desktop 镜像路径静默迁移方案](https://aicity.blog.csdn.net/article/details/149172789)

---

### 3. Anaconda 多版本环境集中管理

将 Anaconda 安装路径设为 `I:\Conda`，有预见性地缩短路径字符长度，并统一管理：

```text
I:\Conda\
│
├── base\              ← 默认环境（对应默认 python 版本）
├── python38\          ← 创建新环境并指定 python 版本
├── python39\
├── python310\
├── python311\
├── python312\
├── python313\
├── python314\
└── ...
```

> 每个虚拟环境均可作为独立 Python 解释器调用，避免污染全局 PATH。

详见：[Anaconda 多版本虚拟环境路径规划](https://aicity.blog.csdn.net/article/details/149021241)

---

## ✅ 治理效果对比

| 方面    | 无治理（默认路径）      | 有治理（统一结构）  |
| ----- | -------------- | ---------- |
| 系统盘压力 | 高，AppData 快速膨胀 | 最低，仅用于系统运行 |
| 项目迁移  | 繁琐，依赖默认路径      | 一键导入路径结构即可 |
| 开发协同  | 困难，路径难复用       | 统一规范，路径通用  |
| 构建复现  | 无法保证           | 完全可控       |

---

## 📌 总结

路径结构治理是 AI 开发环境构建的第一步。

只有当你的各类工具、镜像、环境、项目、数据集**都有了明确的归属与分区**，你才能真正做到：

* 环境清晰可控
* 项目快速迁移
* 结构稳固复现
* 教学统一部署

> 推荐进一步阅读：[三维治理理念原文](https://aicity.blog.csdn.net/article/details/149055334)